<div class="container">
    <app-nav-bar-produit></app-nav-bar-produit>

<ng-container *ngIf="produits$|async as result" [ngSwitch]="result.dataState">

    <ng-container *ngSwitchCase="DataStateEnum.LOADING">
       Encours de Chargement........
    </ng-container>
    <ng-container *ngSwitchCase="DataStateEnum.LOADED">
        <table class="table mt-2">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Prix</th>
                    <th>Quantity</th>
                    <th>Selected</th>
                    <th>Promo</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let produit of result.data">
                    <td >{{produit.id}}</td>
                    <td>{{produit.name}}</td>
                    <td>{{produit.prix}}</td>
                    <td >{{produit.quantity}}</td>
                    <td>{{produit.selected}}</td>
                    <td>{{produit.promo}}</td>
                    <td>
                        <button type="button" class="mr-2" 
                        [ngClass]="produit.selected?'btn btn-outline-success':'btn btn-outline-danger'"
                        (click)="onSelectProduct(produit,ActionProduit.SELECTED)">
                            <span *ngIf="produit.selected" >Selected</span>
                            <span *ngIf="!produit.selected">UnSelected</span>
                        </button>
                        <button type="button" class="mr-2" 
                        [ngClass]="produit.promo?'btn btn-outline-success':'btn btn-outline-danger'"
                        (click)="onSelectProduct(produit,ActionProduit.PROMO)">
                            <span *ngIf="produit.promo" >En Promo</span>
                            <span *ngIf="!produit.promo">Pas Promo</span>
                        </button>
                        <button class="btn btn-warning  mr-2" (click)="onEditProduit(produit)">
                          <i class="fa fa-edit    ">  </i>
                        </button>
                          <button class="btn btn-danger mr-2" >
                            <i class="fa fa-trash    " (click)="onDeleteProduit(produit)"></i>
                          </button>
                    </td>
                </tr>
                
            </tbody>
        </table>
    </ng-container>
    <ng-container *ngSwitchCase="DataStateEnum.ERROR">
        <div>{{result.errorMessage}}</div>
    </ng-container>

</ng-container>

</div>